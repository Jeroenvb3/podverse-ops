# BASE CONFIG

indexer {
    mem_limit = 2G
}

source base {
    type = pgsql
    sql_host = podverse_db
    sql_user = postgres
    sql_pass = mysecretpw
    sql_db = postgres
}

# AUTHOR NAME SEARCH

source author_base: base {
    sql_field_string = name
    sql_attr_string = podverse_id
}

source author: author_base {
    sql_query = \
        SELECT \
            int_id, \
            id AS podverse_id, \
            name \
        FROM authors
}

index idx_author {
    source = author
    path = author_name
    min_prefix_len = 2
    min_infix_len = 2
    charset_table = non_cjk, cjk
}

# EPISODE TITLE SEARCH
# NOTE: I'm splitting the csv into chunks then merging them because the indexer operation
# kept failing when trying to run it on the full 80+ million row csv file.
# NOTE: the episode_export_##.csv files must exist when docker-compose up is run
# for podverse_manticore, otherwise directories will be created in the container
# instead of the actual files.

source episode_csv_base {
    type = csvpipe
    csvpipe_field_string = podverseId
    csvpipe_field_string = title
    csvpipe_attr_uint = pastHourTotalUniquePageviews
    csvpipe_attr_uint = pastDayTotalUniquePageviews
    csvpipe_attr_uint = pastWeekTotalUniquePageviews
    csvpipe_attr_uint = pastMonthTotalUniquePageviews
    csvpipe_attr_uint = pastYearTotalUniquePageviews
    csvpipe_attr_uint = pastAllTimeTotalUniquePageviews
}

source episode_csv_00: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_00.csv
}

source episode_csv_01: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_01.csv
}

source episode_csv_02: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_02.csv
}

source episode_csv_03: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_03.csv
}

source episode_csv_04: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_04.csv
}

source episode_csv_05: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_05.csv
}

source episode_csv_06: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_06.csv
}

source episode_csv_07: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_07.csv
}

source episode_csv_08: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_08.csv
}

source episode_csv_09: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_09.csv
}

source episode_csv_10: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_10.csv
}

source episode_csv_11: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_11.csv
}

source episode_csv_12: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_12.csv
}

source episode_csv_13: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_13.csv
}

source episode_csv_14: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_14.csv
}

source episode_csv_15: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_15.csv
}

source episode_csv_16: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_16.csv
}

source episode_csv_17: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_17.csv
}

source episode_csv_18: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_18.csv
}

source episode_csv_19: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_19.csv
}

source episode_csv_20: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_20.csv
}

source episode_csv_21: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_21.csv
}

source episode_csv_22: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_22.csv
}

source episode_csv_23: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_23.csv
}

source episode_csv_24: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_24.csv
}

source episode_csv_25: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_25.csv
}

source episode_csv_26: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_26.csv
}

source episode_csv_27: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_27.csv
}

source episode_csv_28: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_28.csv
}

source episode_csv_29: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_29.csv
}

source episode_csv_30: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_30.csv
}

source episode_csv_31: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_31.csv
}

source episode_csv_32: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_32.csv
}

source episode_csv_33: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_33.csv
}

source episode_csv_34: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_34.csv
}

source episode_csv_35: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_35.csv
}

source episode_csv_36: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_36.csv
}

source episode_csv_37: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_37.csv
}

source episode_csv_38: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_38.csv
}

source episode_csv_39: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_39.csv
}

source episode_csv_40: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_40.csv
}

source episode_csv_41: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_41.csv
}

source episode_csv_42: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_42.csv
}

source episode_csv_43: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_43.csv
}

source episode_csv_44: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_44.csv
}

source episode_csv_45: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_45.csv
}

source episode_csv_46: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_46.csv
}

source episode_csv_47: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_47.csv
}

source episode_csv_48: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_48.csv
}

source episode_csv_49: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_49.csv
}

source episode_csv_50: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_50.csv
}

source episode_csv_51: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_51.csv
}

source episode_csv_52: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_52.csv
}

source episode_csv_53: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_53.csv
}

source episode_csv_54: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_54.csv
}

source episode_csv_55: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_55.csv
}

source episode_csv_56: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_56.csv
}

source episode_csv_57: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_57.csv
}

source episode_csv_58: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_58.csv
}

source episode_csv_59: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_59.csv
}

source episode_csv_60: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_60.csv
}

source episode_csv_61: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_61.csv
}

source episode_csv_62: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_62.csv
}

source episode_csv_63: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_63.csv
}

source episode_csv_64: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_64.csv
}

source episode_csv_65: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_65.csv
}

source episode_csv_66: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_66.csv
}

source episode_csv_67: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_67.csv
}

source episode_csv_68: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_68.csv
}

source episode_csv_69: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_69.csv
}

source episode_csv_70: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_70.csv
}

source episode_csv_71: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_71.csv
}

source episode_csv_72: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_72.csv
}

source episode_csv_73: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_73.csv
}

source episode_csv_74: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_74.csv
}

source episode_csv_75: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_75.csv
}

source episode_csv_76: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_76.csv
}

source episode_csv_77: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_77.csv
}

source episode_csv_78: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_78.csv
}

source episode_csv_79: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_79.csv
}

source episode_csv_80: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_80.csv
}

source episode_csv_81: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_81.csv
}

source episode_csv_82: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_82.csv
}

source episode_csv_83: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_83.csv
}

source episode_csv_84: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_84.csv
}

source episode_csv_85: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_85.csv
}

source episode_csv_86: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_86.csv
}

source episode_csv_87: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_87.csv
}

source episode_csv_88: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_88.csv
}

source episode_csv_89: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_89.csv
}

source episode_csv_90: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_90.csv
}

source episode_csv_91: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_91.csv
}

source episode_csv_92: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_92.csv
}

source episode_csv_93: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_93.csv
}

source episode_csv_94: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_94.csv
}

source episode_csv_95: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_95.csv
}

source episode_csv_96: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_96.csv
}

source episode_csv_97: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_97.csv
}

source episode_csv_98: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_98.csv
}

source episode_csv_99: episode_csv_base {
    csvpipe_command = cat /etc/manticoresearch/episode_export_99.csv
}

index idx_episode_base {
    min_prefix_len = 3
    min_infix_len = 3
    charset_table = non_cjk, cjk
}

index idx_episode_00: idx_episode_base {
    path = episode_title_00
    source = episode_csv_00
}

index idx_episode_01: idx_episode_base {
    path = episode_title_01
    source = episode_csv_01
}

index idx_episode_02: idx_episode_base {
    path = episode_title_02
    source = episode_csv_02
}

index idx_episode_03: idx_episode_base {
    path = episode_title_03
    source = episode_csv_03
}

index idx_episode_04: idx_episode_base {
    path = episode_title_04
    source = episode_csv_04
}

index idx_episode_05: idx_episode_base {
    path = episode_title_05
    source = episode_csv_05
}

index idx_episode_06: idx_episode_base {
    path = episode_title_06
    source = episode_csv_06
}

index idx_episode_07: idx_episode_base {
    path = episode_title_07
    source = episode_csv_07
}

index idx_episode_08: idx_episode_base {
    path = episode_title_08
    source = episode_csv_08
}

index idx_episode_09: idx_episode_base {
    path = episode_title_09
    source = episode_csv_09
}

index idx_episode_10: idx_episode_base {
    path = episode_title_10
    source = episode_csv_10
}

index idx_episode_11: idx_episode_base {
    path = episode_title_11
    source = episode_csv_11
}

index idx_episode_12: idx_episode_base {
    path = episode_title_12
    source = episode_csv_12
}

index idx_episode_13: idx_episode_base {
    path = episode_title_13
    source = episode_csv_13
}

index idx_episode_14: idx_episode_base {
    path = episode_title_14
    source = episode_csv_14
}

index idx_episode_15: idx_episode_base {
    path = episode_title_15
    source = episode_csv_15
}

index idx_episode_16: idx_episode_base {
    path = episode_title_16
    source = episode_csv_16
}

index idx_episode_17: idx_episode_base {
    path = episode_title_17
    source = episode_csv_17
}

index idx_episode_18: idx_episode_base {
    path = episode_title_18
    source = episode_csv_18
}

index idx_episode_19: idx_episode_base {
    path = episode_title_19
    source = episode_csv_19
}

index idx_episode_20: idx_episode_base {
    path = episode_title_20
    source = episode_csv_20
}

index idx_episode_21: idx_episode_base {
    path = episode_title_21
    source = episode_csv_21
}

index idx_episode_22: idx_episode_base {
    path = episode_title_22
    source = episode_csv_22
}

index idx_episode_23: idx_episode_base {
    path = episode_title_23
    source = episode_csv_23
}

index idx_episode_24: idx_episode_base {
    path = episode_title_24
    source = episode_csv_24
}

index idx_episode_25: idx_episode_base {
    path = episode_title_25
    source = episode_csv_25
}

index idx_episode_26: idx_episode_base {
    path = episode_title_26
    source = episode_csv_26
}

index idx_episode_27: idx_episode_base {
    path = episode_title_27
    source = episode_csv_27
}

index idx_episode_28: idx_episode_base {
    path = episode_title_28
    source = episode_csv_28
}

index idx_episode_29: idx_episode_base {
    path = episode_title_29
    source = episode_csv_29
}

index idx_episode_30: idx_episode_base {
    path = episode_title_30
    source = episode_csv_30
}

index idx_episode_31: idx_episode_base {
    path = episode_title_31
    source = episode_csv_31
}

index idx_episode_32: idx_episode_base {
    path = episode_title_32
    source = episode_csv_32
}

index idx_episode_33: idx_episode_base {
    path = episode_title_33
    source = episode_csv_33
}

index idx_episode_34: idx_episode_base {
    path = episode_title_34
    source = episode_csv_34
}

index idx_episode_35: idx_episode_base {
    path = episode_title_35
    source = episode_csv_35
}

index idx_episode_36: idx_episode_base {
    path = episode_title_36
    source = episode_csv_36
}

index idx_episode_37: idx_episode_base {
    path = episode_title_37
    source = episode_csv_37
}

index idx_episode_38: idx_episode_base {
    path = episode_title_38
    source = episode_csv_38
}

index idx_episode_39: idx_episode_base {
    path = episode_title_39
    source = episode_csv_39
}

index idx_episode_40: idx_episode_base {
    path = episode_title_40
    source = episode_csv_40
}

index idx_episode_41: idx_episode_base {
    path = episode_title_41
    source = episode_csv_41
}

index idx_episode_42: idx_episode_base {
    path = episode_title_42
    source = episode_csv_42
}

index idx_episode_43: idx_episode_base {
    path = episode_title_43
    source = episode_csv_43
}

index idx_episode_44: idx_episode_base {
    path = episode_title_44
    source = episode_csv_44
}

index idx_episode_45: idx_episode_base {
    path = episode_title_45
    source = episode_csv_45
}

index idx_episode_46: idx_episode_base {
    path = episode_title_46
    source = episode_csv_46
}

index idx_episode_47: idx_episode_base {
    path = episode_title_47
    source = episode_csv_47
}

index idx_episode_48: idx_episode_base {
    path = episode_title_48
    source = episode_csv_48
}

index idx_episode_49: idx_episode_base {
    path = episode_title_49
    source = episode_csv_49
}

index idx_episode_50: idx_episode_base {
    path = episode_title_50
    source = episode_csv_50
}

index idx_episode_51: idx_episode_base {
    path = episode_title_51
    source = episode_csv_51
}

index idx_episode_52: idx_episode_base {
    path = episode_title_52
    source = episode_csv_52
}

index idx_episode_53: idx_episode_base {
    path = episode_title_53
    source = episode_csv_53
}

index idx_episode_54: idx_episode_base {
    path = episode_title_54
    source = episode_csv_54
}

index idx_episode_55: idx_episode_base {
    path = episode_title_55
    source = episode_csv_55
}

index idx_episode_56: idx_episode_base {
    path = episode_title_56
    source = episode_csv_56
}

index idx_episode_57: idx_episode_base {
    path = episode_title_57
    source = episode_csv_57
}

index idx_episode_58: idx_episode_base {
    path = episode_title_58
    source = episode_csv_58
}

index idx_episode_59: idx_episode_base {
    path = episode_title_59
    source = episode_csv_59
}

index idx_episode_60: idx_episode_base {
    path = episode_title_60
    source = episode_csv_60
}

index idx_episode_61: idx_episode_base {
    path = episode_title_61
    source = episode_csv_61
}

index idx_episode_62: idx_episode_base {
    path = episode_title_62
    source = episode_csv_62
}

index idx_episode_63: idx_episode_base {
    path = episode_title_63
    source = episode_csv_63
}

index idx_episode_64: idx_episode_base {
    path = episode_title_64
    source = episode_csv_64
}

index idx_episode_65: idx_episode_base {
    path = episode_title_65
    source = episode_csv_65
}

index idx_episode_66: idx_episode_base {
    path = episode_title_66
    source = episode_csv_66
}

index idx_episode_67: idx_episode_base {
    path = episode_title_67
    source = episode_csv_67
}

index idx_episode_68: idx_episode_base {
    path = episode_title_68
    source = episode_csv_68
}

index idx_episode_69: idx_episode_base {
    path = episode_title_69
    source = episode_csv_69
}

index idx_episode_70: idx_episode_base {
    path = episode_title_70
    source = episode_csv_70
}

index idx_episode_71: idx_episode_base {
    path = episode_title_71
    source = episode_csv_71
}

index idx_episode_72: idx_episode_base {
    path = episode_title_72
    source = episode_csv_72
}

index idx_episode_73: idx_episode_base {
    path = episode_title_73
    source = episode_csv_73
}

index idx_episode_74: idx_episode_base {
    path = episode_title_74
    source = episode_csv_74
}

index idx_episode_75: idx_episode_base {
    path = episode_title_75
    source = episode_csv_75
}

index idx_episode_76: idx_episode_base {
    path = episode_title_76
    source = episode_csv_76
}

index idx_episode_77: idx_episode_base {
    path = episode_title_77
    source = episode_csv_77
}

index idx_episode_78: idx_episode_base {
    path = episode_title_78
    source = episode_csv_78
}

index idx_episode_79: idx_episode_base {
    path = episode_title_79
    source = episode_csv_79
}

index idx_episode_80: idx_episode_base {
    path = episode_title_80
    source = episode_csv_80
}

index idx_episode_81: idx_episode_base {
    path = episode_title_81
    source = episode_csv_81
}

index idx_episode_82: idx_episode_base {
    path = episode_title_82
    source = episode_csv_82
}

index idx_episode_83: idx_episode_base {
    path = episode_title_83
    source = episode_csv_83
}

index idx_episode_84: idx_episode_base {
    path = episode_title_84
    source = episode_csv_84
}

index idx_episode_85: idx_episode_base {
    path = episode_title_85
    source = episode_csv_85
}

index idx_episode_86: idx_episode_base {
    path = episode_title_86
    source = episode_csv_86
}

index idx_episode_87: idx_episode_base {
    path = episode_title_87
    source = episode_csv_87
}

index idx_episode_88: idx_episode_base {
    path = episode_title_88
    source = episode_csv_88
}

index idx_episode_89: idx_episode_base {
    path = episode_title_89
    source = episode_csv_89
}

index idx_episode_90: idx_episode_base {
    path = episode_title_90
    source = episode_csv_90
}

index idx_episode_91: idx_episode_base {
    path = episode_title_91
    source = episode_csv_91
}

index idx_episode_92: idx_episode_base {
    path = episode_title_92
    source = episode_csv_92
}

index idx_episode_93: idx_episode_base {
    path = episode_title_93
    source = episode_csv_93
}

index idx_episode_94: idx_episode_base {
    path = episode_title_94
    source = episode_csv_94
}

index idx_episode_95: idx_episode_base {
    path = episode_title_95
    source = episode_csv_95
}

index idx_episode_96: idx_episode_base {
    path = episode_title_96
    source = episode_csv_96
}

index idx_episode_97: idx_episode_base {
    path = episode_title_97
    source = episode_csv_97
}

index idx_episode_98: idx_episode_base {
    path = episode_title_98
    source = episode_csv_98
}

index idx_episode_99: idx_episode_base {
    path = episode_title_99
    source = episode_csv_99
}

# MEDIA_REF TITLE SEARCH

source media_ref_base: base {
    sql_field_string = title
    sql_attr_string = podverse_id
    sql_attr_string = pastHourTotalUniquePageviews
    sql_attr_string = pastDayTotalUniquePageviews
    sql_attr_string = pastWeekTotalUniquePageviews
    sql_attr_string = pastMonthTotalUniquePageviews
    sql_attr_string = pastYearTotalUniquePageviews
    sql_attr_string = pastAllTimeTotalUniquePageviews
}

source media_ref: media_ref_base {
    sql_query = \
        SELECT \
            int_id, \
            id AS podverse_id, \
            title, \
            "pastHourTotalUniquePageviews", \
            "pastDayTotalUniquePageviews", \
            "pastWeekTotalUniquePageviews", \
            "pastMonthTotalUniquePageviews", \
            "pastYearTotalUniquePageviews", \
            "pastAllTimeTotalUniquePageviews" \
        FROM "mediaRefs"
}

index idx_media_ref {
    source = media_ref
    path = media_ref_title
    min_prefix_len = 2
    min_infix_len = 2
    charset_table = non_cjk, cjk
}

# PLAYLIST TITLE SEARCH

source playlist_base: base {
    sql_field_string = title
    sql_attr_string = podverse_id
}

source playlist: playlist_base {
    sql_query = \
        SELECT \
            int_id, \
            id AS podverse_id, \
            title \
        FROM playlists
}

index idx_playlist {
    source = playlist
    path = playlist_title
    min_prefix_len = 2
    min_infix_len = 2
    charset_table = non_cjk, cjk
}

# PODCAST TITLE SEARCH

source podcast_base: base {
    sql_field_string = title
    sql_attr_string = podverse_id
    sql_attr_string = pastHourTotalUniquePageviews
    sql_attr_string = pastDayTotalUniquePageviews
    sql_attr_string = pastWeekTotalUniquePageviews
    sql_attr_string = pastMonthTotalUniquePageviews
    sql_attr_string = pastYearTotalUniquePageviews
    sql_attr_string = pastAllTimeTotalUniquePageviews
}

source podcast: podcast_base {
    sql_query = \
        SELECT \
            int_id, \
            id AS podverse_id, \
            title, \
            "pastHourTotalUniquePageviews", \
            "pastDayTotalUniquePageviews", \
            "pastWeekTotalUniquePageviews", \
            "pastMonthTotalUniquePageviews", \
            "pastYearTotalUniquePageviews", \
            "pastAllTimeTotalUniquePageviews" \
        FROM podcasts
}

index idx_podcast {
    source = podcast
    path = podcasts_title
    min_prefix_len = 2
    min_infix_len = 2
    charset_table = non_cjk, cjk
}

# SEARCHD CONFIG

searchd {
    listen = 9306:mysql41
    listen = 9308:http
    log = searchd.log
    pid_file = manticoresearch.pid
    binlog_path =
    collation_server = utf8_ci
}
